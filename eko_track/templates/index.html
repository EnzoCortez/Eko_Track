{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <h2>Reportes Recientes</h2>
        {% for report in reports %}
        <div
            class="card mb-3 p-3 {% if report.criticality == 'Alto' %}priority-high{% elif report.criticality == 'Medio' %}priority-med{% else %}priority-low{% endif %}">
            <div class="d-flex justify-content-between">
                <h5>{{ report.title }} <small class="text-muted">({{ report.category.name }})</small></h5>
                <span class="badge bg-secondary">{{ report.criticality }}</span>
            </div>
            <p>{{ report.description }}</p>
            <small>Costo Est: ${{ report.estimated_cost }} | Score: {{ report.calculate_priority_score() }}</small>
        </div>
        {% endfor %}
    </div>

    <div class="col-md-4">
        <div class="card p-3 bg-white">
            <h3>ðŸ’¡ Intervenciones Sugeridas</h3>
            <p class="text-muted">Basado en Matriz de Criticidad y Presupuesto</p>
            <div class="alert alert-success">
                <strong>Presupuesto:</strong> ${{ budget }}<br>
                <strong>Costo Total Sugerido:</strong> ${{ spent }}
            </div>

            <ul class="list-group">
                {% for item in suggested %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ item.title }}
                    <span class="badge bg-primary rounded-pill">${{ item.estimated_cost }}</span>
                </li>
                {% else %}
                <li class="list-group-item">No hay intervenciones sugeridas dentro del presupuesto.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}